= 计划任务 (scheduledtasks)

`scheduledtasks` 端点提供了关于应用程序计划任务的信息。

== 获取定时任务

要获取定时任务，可以发送一个 `GET` 请求到 `/actuator/scheduledtasks`，如下所示的 curl 示例：

[source,bash]
----
curl 'http://localhost:8080/actuator/scheduledtasks' -i -X GET
----

得到的响应类似如下：

----
HTTP/1.1 200 OK
Content-Type: application/vnd.spring-boot.actuator.v3+json
Content-Length: 629

{
  "cron" : [ {
    "runnable" : {
      "target" : "com.example.Processor.processOrders"
    },
    "expression" : "0 0 0/3 1/1 * ?"
  } ],
  "fixedDelay" : [ {
    "runnable" : {
      "target" : "com.example.Processor.purge"
    },
    "initialDelay" : 5000,
    "interval" : 5000
  } ],
  "fixedRate" : [ {
    "runnable" : {
      "target" : "com.example.Processor.retrieveIssues"
    },
    "initialDelay" : 10000,
    "interval" : 3000
  } ],
  "custom" : [ {
    "runnable" : {
      "target" : "com.example.Processor$CustomTriggeredRunnable"
    },
    "trigger" : "com.example.Processor$CustomTrigger@111d4b1c"
  } ]
}
----

=== 响应结构

响应中包含应用程序定时任务的详细信息。下表描述了响应的结构：

[%autowidth]
|===
|路径|类型|描述
|`cron`|`Array`|Cron 任务（如果有）。
|`cron.[].runnable.target`|`String`|将执行的目标。
|`cron.[].expression`|`String`|Cron 表达式。
|`fixedDelay`|`Array`|固定延迟任务（如果有）。
|`fixedDelay.[].runnable.target`|`String`|将执行的目标。
|`fixedDelay.[].initialDelay`|`Number`|首次执行前的延迟时间（毫秒）。
|`fixedDelay.[].interval`|`Number`|从上一次执行结束到下一次开始之间的间隔时间（毫秒）。
|`fixedRate`|`Array`|固定频率任务（如果有）。
|`fixedRate.[].runnable.target`|`String`|将执行的目标。
|`fixedRate.[].interval`|`Number`|每次执行开始之间的间隔时间（毫秒）。
|`fixedRate.[].initialDelay`|`Number`|首次执行前的延迟时间（毫秒）。
|`custom`|`Array`|自定义触发器的任务（如果有）。
|`custom.[].runnable.target`|`String`|将执行的目标。
|`custom.[].trigger`|`String`|任务的触发器。
|===
